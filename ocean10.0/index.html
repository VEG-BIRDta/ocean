<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8"/>
  <title>互动式电子海洋</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

 <!-- ① 首页 -->
<section id="home" class="screen">
  <h1>互动式电子海洋</h1>
  <div class="image-frame">
    <img src="assets/home-image.png" alt="海洋场景" class="frame-image">
  </div>
  <div class="button-group">
    <button id="btnStart" class="btn">开始绘画</button>
    <button id="goToSeaFromHome" class="btn">进入海洋</button>
  </div>
</section>


  <!-- ② 画板 -->
  <section id="draw" class="screen hidden">
    <h2>画一条你的小鱼</h2>
    <div class="shell-count">贝壳数量: <span id="shellCountDraw">0</span></div>
    <button id="toStoreBtnDraw" class="btn store-btn-draw">
      <img src="assets/store.png" alt="商店" class="store-icon">
    </button>
    <canvas id="canvas" width="400" height="400"></canvas>
    <div class="toolbar">
      <input type="color" id="color" value="#409eff">
      <input type="range" id="lineWidth" min="2" max="20" value="4">
      <button id="undo" class="btn">撤销</button>
      <button id="eraser" class="btn">橡皮</button>
      <button id="clear" class="btn">清空</button>
      <button id="submit" class="btn">完成 / 提交</button>
      <button id="goToSea" class="btn">进入海洋</button>
    </div>
    <div class="storyBox">
      <input id="fishName" maxlength="12" placeholder="给小鱼起名字（12字内）">
      <input id="story" maxlength="20" placeholder="一句20字内介绍">
    </div>
  </section>

  <!-- ③ 海洋 -->
 <section id="sea" class="screen hidden">
  <canvas id="ocean"></canvas>
  <div class="shell-count">贝壳数量: <span id="shellCountSea">0</span></div>
  <div class="shell-count" style="top: 60px;">鱼食数量: <span id="fishFoodCount">0</span></div>
  <button id="back" class="btn">← 返回绘画</button>
  <button id="showFishes" class="btn fish-manage-btn">管理</button>
  <button id="clearDataBtn" class="btn" style="top: 200px; right: 20px; background-color: #e74c3c;" title="清除所有用户数据，包括绘制的小鱼、购买记录、贝壳和鱼食">清除所有数据</button>
  <button id="feedBtn" class="btn" style="top: 70px; left: 20px; position: absolute;">喂食小鱼</button>
  <button id="toStoreBtnSea" class="btn store-btn-sea">
    <img src="assets/store.png" alt="商店" class="store-icon">
  </button>
  <!-- 新增背景选择按钮 -->
  <button id="changeBgBtn" class="btn" style="bottom: 100px; left: 20px; position: absolute;">更换背景</button>
  <div id="fishListPanel" class="fish-list-panel">
    <h3>我的小鱼列表</h3>
    <div id="fishItems" class="fish-items">
  </div>
</section>

<!-- ⑥ 背景选择 -->
<section id="backgroundSelector" class="screen hidden">
  <h2>选择海洋背景</h2>
  <div class="background-options">
    <div class="background-item" data-bg="sea">
      <img src="assets/sea.png" alt="海洋背景1">
      <span>背景一</span>
    </div>
    <div class="background-item" data-bg="seaone">
      <img src="assets/seaone.png" alt="海洋背景1">
      <span>背景二</span>
    </div>
    <div class="background-item" data-bg="seatwo">
      <img src="assets/seatwo.png" alt="海洋背景2">
      <span>背景三</span>
    </div>
    <div class="background-item" data-bg="seathree">
      <img src="assets/seathree.png" alt="海洋背景3">
      <span>背景四</span>
    </div>
  </div>
  <button id="backToSeaFromBg" class="btn back-btn">← 返回海洋</button>
</section>


  <!-- ④ 商店 -->
  <section id="store" class="screen hidden">
    <div class="store-container">
      <h2>海洋商店</h2>
      <div class="shell-count">贝壳数量: <span id="shellCountStore">0</span></div>
      
      <!-- 购买进度提示 -->
      <div id="purchaseProgress" class="purchase-progress-series">
        <!-- 海绵宝宝系列 -->
        <div class="progress-series">
          <div class="progress-series-title">
            <span>海绵宝宝系列</span>
            <span class="count"><span id="spongebobCount">0</span>/4</span>
          </div>
          <div class="progress-bar">
            <div id="spongebobProgress" class="progress-fill spongebob-progress"></div>
          </div>
        </div>
        
        <!-- 小鲤鱼历险记系列 -->
        <div class="progress-series">
          <div class="progress-series-title">
            <span>小鲤鱼历险记系列</span>
            <span class="count"><span id="fishAdventureCount">0</span>/4</span>
          </div>
          <div class="progress-bar">
            <div id="fishAdventureProgress" class="progress-fill fish-adventure-progress"></div>
          </div>
        </div>
        
        <!-- 海底总动员系列 -->
        <div class="progress-series">
          <div class="progress-series-title">
            <span>海底总动员系列</span>
            <span class="count"><span id="findingNemoCount">0</span>/4</span>
          </div>
          <div class="progress-bar">
            <div id="findingNemoProgress" class="progress-fill finding-nemo-progress"></div>
          </div>
        </div>
      </div>      

      <div class="store-items">
        <!-- 角色商品 -->
        <div class="items-category characters active">
          <!-- 海绵宝宝系列 -->
          <div class="store-item" data-id="spongebob" data-price="20">
            <div class="item-image">
              <img src="assets/spongebob.png" alt="海绵宝宝" class="item-img">
            </div>
            <div class="item-info">
              <h3>海绵宝宝</h3>
              <p>我准备好了！我准备好了！</p>
              <div class="item-price">20 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="patrick" data-price="30">
            <div class="item-image">
              <img src="assets/patrick.png" alt="派大星" class="item-img">
            </div>
            <div class="item-info">
              <h3>派大星</h3>
              <p>海绵宝宝我们去抓水母吧</p>
              <div class="item-price">30 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="squidward" data-price="40">
            <div class="item-image">
              <img src="assets/squidward.png" alt="章鱼哥" class="item-img">
            </div>
            <div class="item-info">
              <h3>章鱼哥</h3>
              <p>艺术是我的生命！让我安静地吹我的单簧管...</p>
              <div class="item-price">40 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="krabs" data-price="50">
            <div class="item-image">
              <img src="assets/krabs.png" alt="蟹老板" class="item-img">
            </div>
            <div class="item-info">
              <h3>蟹老板</h3>
              <p>钱！钱！钱！我最爱钱！</p>
              <div class="item-price">50 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <!-- 小鲤鱼历险记系列 -->
          <div class="store-item" data-id="paopao" data-price="20">
            <div class="item-image">
              <img src="assets/paopao.png" alt="泡泡" class="item-img">
            </div>
            <div class="item-info">
              <h3>泡泡</h3>
              <p>我就是火热的泡泡！</p>
              <div class="item-price">20 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="meimei" data-price="30">
            <div class="item-image">
              <img src="assets/meimei.png" alt="小美美" class="item-img">
            </div>
            <div class="item-info">
              <h3>小美美</h3>
              <p>歌声是最美的语言</p>
              <div class="item-price">30 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="shuangmiangui" data-price="40">
            <div class="item-image">
              <img src="assets/shuangmiangui.png" alt="双面龟" class="item-img">
            </div>
            <div class="item-info">
              <h3>双面龟</h3>
              <p>我有两张脸，但我很真诚</p>
              <div class="item-price">40 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="aku" data-price="50">
            <div class="item-image">
              <img src="assets/aku.png" alt="阿酷" class="item-img">
            </div>
            <div class="item-info">
              <h3>阿酷</h3>
              <p>冷静思考，智慧取胜</p>
              <div class="item-price">50 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <!-- 海底总动员系列 -->
          <div class="store-item" data-id="nemo" data-price="20">
            <div class="item-image">
              <img src="assets/nemo.png" alt="尼莫" class="item-img">
            </div>
            <div class="item-info">
              <h3>尼莫</h3>
              <p>我只是一条小鱼，但我很勇敢！</p>
              <div class="item-price">20 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="dory" data-price="30">
            <div class="item-image">
              <img src="assets/dory.png" alt="多莉" class="item-img">
            </div>
            <div class="item-info">
              <h3>多莉</h3>
              <p>我是多莉，我会找到我的家人！</p>
              <div class="item-price">30 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="marlin" data-price="40">
            <div class="item-image">
              <img src="assets/marlin.png" alt="马林" class="item-img">
            </div>
            <div class="item-info">
              <h3>马林</h3>
              <p>我会保护我的儿子，不惜一切代价！</p>
              <div class="item-price">40 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="bruce" data-price="50">
            <div class="item-image">
              <img src="assets/bruce.png" alt="布鲁斯" class="item-img">
            </div>
            <div class="item-info">
              <h3>布鲁斯</h3>
              <p>我们是朋友，不是食物！</p>
              <div class="item-price">50 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
        </div>
      <!-- 背景商品 -->
        <div class="items-category backgrounds">
    <div class="store-item" data-id="haimianbaobao" data-price="30" data-type="background">
      <div class="item-image">
        <img src="assets/haimianbaobao.png" alt="海绵宝宝背景" class="item-img">
      </div>
      <div class="item-info">
        <h3>海绵宝宝背景</h3>
        <p>永远年轻，永远理想主义</p>
        <div class="item-price">30 贝壳</div>
      </div>
      <button class="buy-btn">购买</button>
    </div>
    
    <div class="store-item" data-id="xiaoliyu" data-price="30" data-type="background">
      <div class="item-image">
        <img src="assets/xiaoliyu.png" alt="小鲤鱼历险记背景" class="item-img">
      </div>
      <div class="item-info">
        <h3>小鲤鱼历险记背景</h3>
        <p>我心如铁，坚不可摧</p>
        <div class="item-price">30 贝壳</div>
      </div>
      <button class="buy-btn">购买</button>
    </div>
    
    <div class="store-item" data-id="haidizongdongyuan" data-price="30" data-type="background">
      <div class="item-image">
        <img src="assets/haidizongdongyuan.png" alt="海底总动员背景" class="item-img">
      </div>
      <div class="item-info">
        <h3>海底总动员背景</h3>
        <p>爱与勇气的海洋冒险</p>
        <div class="item-price">30 贝壳</div>
      </div>
      <button class="buy-btn">购买</button>
    </div>
  </div>
</div>
        
        <!-- 物品商品 -->
        <div class="items-category items">
          <div class="store-item" data-id="seaweed" data-price="20">
            <div class="item-image">
              <img src="assets/seaweed.png" alt="海草" class="item-img">
            </div>
            <div class="item-info">
              <h3>海草</h3>
              <p>像一棵海草海草</p>
              <div class="item-price">20 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
          
          <div class="store-item" data-id="reef" data-price="30">
            <div class="item-image">
              <img src="assets/reef.png" alt="礁石" class="item-img">
            </div>
            <div class="item-info">
              <h3>礁石</h3>
              <p>一块沉默的礁石...</p>
              <div class="item-price">30 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>

          <div class="store-item" data-id="coral" data-price="25">
              <div class="item-image">
                  <img src="assets/coral.png" alt="珊瑚" class="item-img">
              </div>
              <div class="item-info">
                  <h3>珊瑚</h3>
                  <p>美丽的珊瑚丛，海洋中的宝石 </p>
                  <div class="item-price">25 贝壳</div>
              </div>
              <button class="buy-btn">购买</button>
          </div>    

          <div class="store-item" data-id="fishfood" data-price="1">
            <div class="item-image">
              <img src="assets/fishfood.png" alt="鱼食" class="item-img">
            </div>
            <div class="item-info">
              <h3>鱼食</h3>
              <p>可以喂小鱼的美味食物（可重复购买）</p>
              <div class="item-price">1 贝壳</div>
            </div>
            <button class="buy-btn">购买</button>
          </div>
        </div>
      <!-- 固定在底部的按钮 -->
    </div>
  
  <!-- 独立的按钮区域，在商店容器下方 -->
    <div class="store-bottom-area">
      <button id="backToSeaFromStore" class="store-bottom-btn back-to-sea-btn">返回海洋</button>
      <button id="backFromStore" class="store-bottom-btn back-to-draw-btn">返回绘画</button>
    </div>
  </section>

  <!-- ⑤ 海绵宝宝冒险场景 -->
  <section id="spongebobAdventure" class="screen hidden">
    <div class="adventure-container">
      <div class="adventure-scene">
        <img src="assets/home1.jpg" alt="海绵宝宝冒险场景" class="adventure-background">
        
        <div class="character-spongebob">
          <img src="assets/spongebob.png" alt="海绵宝宝" class="adventure-character">
        </div>
        
        <div class="character-user-fish">
          <!-- 用户的小鱼会动态插入到这里 -->
        </div>
        
        <div class="dialogue-container">
          <div class="dialogue-box spongebob-dialogue">
            <div class="speaker">海绵宝宝</div>
            <div class="message" id="spongebobMessage"></div>
          </div>
          
          <div class="dialogue-box userfish-dialogue hidden">
            <div class="speaker" id="userFishName">你的小鱼</div>
            <div class="message" id="userFishMessage"></div>
          </div>
        </div>
        
        <div class="adventure-controls">
          <button id="nextDialogue" class="btn adventure-btn">继续对话</button>
          <button id="skipAdventure" class="btn adventure-btn skip-btn">跳过冒险</button>
          <button id="goToSeaFromAdventure" class="btn adventure-btn hidden">前往海洋</button>
        </div>
      </div>
    </div>
  </section>

  <script src="js/common.js"></script>
  <script src="js/draw.js"></script>
  <script src="js/ocean.js"></script>
  <script src="js/store.js"></script>
  <script src="js/spongebob-adventure.js"></script>
</body>
</html>
